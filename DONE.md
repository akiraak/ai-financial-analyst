# DONE

## 完了タスク
- [x] リポジトリ作成（Initial commit）
- [x] CLAUDE.md / TODO.md / DONE.md を作成
- [x] プロジェクトの基本構成を決定（companies/nvidia、Node.js + xlsx）
- [x] 開発環境のセットアップ（package.json、xlsxパッケージ導入）
- [x] 財務データの取得方法を決定（エクセル + xlsxパッケージ）
- [x] エクセルの業績データとNVIDIA公式IRの実績値を突合（44件中42件一致、2件軽微な差異）
- [x] NVIDIA決算資料のダウンロード（FY2022〜FY2026 Q3、10-K/10-Q 19件 + プレスリリース 19件 = 全38ファイル）
- [x] 決算資料から業績データxlsxを生成するワークフローを作成
  - extract-financials.js: press-release.html からP/Lデータ抽出（19四半期、FY2022 Q1〜FY2026 Q3）
  - fetch-stock-prices.js: Yahoo Finance APIから四半期末株価取得
  - generate-xlsx.js: template.xlsxベースでNVDA-Financials.xlsx生成
  - 既存xlsxとの突合: 売上高・粗利・R&D・SGA・営業利益・純利益は100%一致
- [x] テンプレート・スクリプトの整備
  - template.xlsxから年度・Qラベル・設定パラメータを削除（スクリプトで動的設定）
  - 不要行を削除（ROE・計算PER・時価総額・設定パラメータ）
  - カテゴリ別色分けデザイン（売上:緑、利益:青、費用:橙、株式:紫）
- [x] FY2026 Q4 Outlookデータの反映（ガイダンスベースの予想値）
- [x] xlsx数値検証ワークフローを作成・実行（全437項目一致）
- [x] データ分析・可視化の要件定義（workflows/analyze-and-visualize.md）
  - グラフ4種類: P/L推移、利益率推移、株価&PER複合、費用構造
  - 技術スタック: GitHub Pages + Chart.js（静的HTML、ビルド不要）
  - 複数企業対応のディレクトリ構成を設計
- [x] GitHub PagesのPages設定を有効化（Settings → Pages → main / docs）
- [x] GitHub Pages ダッシュボードの実装（ステップ1〜4）
  - generate-data-json.js: financials.json + stock-prices.json → data.json 統合
  - docs/nvidia/data.json: 20四半期分の統合データ生成
  - docs/js/chart-builder.js: 4種類のグラフ描画ロジック
  - docs/css/style.css, docs/index.html, docs/nvidia/index.html
- [x] 最新決算サマリーをダッシュボード先頭に追加（KPIグリッド + 分析テキスト）
- [x] NVIDIA業績分析の充実化（4→10チャート、→ companies/nvidia/PLAN.md）
  - Phase 1: セグメント別売上（extract-segments.js → segments.json、チャート×2）
    - Data Center / Gaming / Professional Visualization / Automotive / OEM & Other
    - 19四半期分抽出、OEMは総売上との差分で算出、全四半期一致確認済み
  - Phase 2: B/S・キャッシュフロー（extract-balance-sheet.js / extract-cash-flows.js、チャート×2）
    - B/S: 8項目×19四半期（Cash, Total Assets/Liabilities/Equity, Debt等）
    - CF: 4項目×19四半期（Operating/Investing/Financing CF + FCF）
  - Phase 3: バリュエーション指標（PER / PSR / PBR 複合折れ線チャート×1）
    - sharesDilutedをスプリット調整してdata.jsonに統合
  - Phase 4: 成長率推移（売上高・営業利益・純利益のYoY成長率チャート×1）
- [x] 投資ポートフォリオの抽出・可視化（extract-investments.js → investments.json、チャート13）
- [x] 決算資料リンクセクションをダッシュボードに追加（ir-links.json、アコーディオンUI）
- [x] 財務データのHTML表+xlsxダウンロードをダッシュボードに追加
  - 全24項目（P/L・費用・利益・株式指標）をExcel準拠で表示
  - カテゴリ別背景色（売上:緑、利益:青、費用:橙、株式:紫）
  - 年度+四半期の2段ヘッダー、会社予想は「Q4予想」と明示
  - NVDA-Financials.xlsx ダウンロードリンク付き
- [x] 四半期ごとの分析ページ
  - TOP → NVIDIA → 期間選択 → 期間の分析ページ の4階層構成
  - ir-data → analysis にリネーム、quarters/YYYYQN/ フォルダ構成
  - generate-data-json.js で四半期別data.json + index.html を自動生成
  - 各四半期ページ: KPIサマリー + P/L詳細テーブル + ウォーターフォール + 13時系列チャート
  - NVIDIAトップをランディングページに簡素化（チャートは四半期ページへ移動）
- [x] 分析ページ復元: チャート分析コメント（1-1）+ 投資コミットメント（1-2）+ ワークフロー更新（1-4）
  - 全13チャートに「概要」+「分析」の2段構成を `<details class="chart-details">` 形式で復元
  - 投資コミットメントセクション（KPIグリッド + 主要コミットメント一覧）を追加
  - ワークフロー（analyze-and-visualize.md）にコンテンツ仕様・更新手順を追記済み
- [x] デザインブラッシュアップ
  - CSS変数でカラーパレットを一元管理（淡い緑+ピンク配色）
  - セクションナビゲーション（A〜E + 財務データ・決算資料）
  - A〜Eのセクショングループ見出し
  - チャート解説をdetails/summaryで折りたたみ化
  - レスポンシブ対応（768px/480pxブレークポイント）
- [x] Phase 2完了: 全28四半期の分析テキストを追加
  - FY2020-FY2021プレスリリース取得（8四半期分）
  - 全27四半期分のデータ抽出・data.json再生成
  - analysis-text.json: overviews（12チャート概要）+ 28四半期分の解説テキスト（サマリー+チャート別分析）
  - データ充足チェック手順をworkflowに追加（analyze-and-visualize.md）
- [x] 四半期ナビの前後リンクを端ページで非表示にする
  - generate-data-json.jsで各ページにprevPage/nextPageを付与
  - quarter-detail.jsのrenderNavをデータ駆動に変更
- [x] ir-links.json 404エラー・決算資料セクション非表示を修正
  - generate-ir-links.jsを作成し、フルビルドのStep 6で自動生成するよう変更
  - full-build.mdのワークフローにgenerate-ir-links.jsを追加
- [x] 分析ページの末尾に使用した財務データへのリンクを追加
- [x] 分析ページにエクセルの内容（財務データ表）を表示
- [x] デザイン調整: ヘッダーフラット化・ライムグリーン配色・ピンクアクセント強化
  - quarter-detail.jsにrenderFinancialTable()を追加（旧ランディングページのコードを移植）
  - template.htmlに財務データセクション+セクションナビリンクを追加
  - 24行の財務項目（P/L・費用・利益率・株式指標）をカテゴリ別色分けで表示
- [x] ヘッダーにサイト名を表示
- [x] トップページ改善: 各企業カードに分析ページの生成済み期間を表示
- [x] トップページ改善: 各企業カードに次の決算発表日を表示（過ぎていたらアクセントカラーで強調）
  - config.json に nextEarningsDate を追加、generate-data-json.js で data.json に伝搬
  - index.html で各社の data.json を fetch し動的表示
